<div class="turnos-container">
  <div class="header-section">
    <h2>
      <i class="fas fa-calendar-alt"></i> Agenda de Turnos
    </h2>
    <small class="text-muted">
      <i class="fas fa-clock"></i> Todos los turnos registrados
    </small>
  </div>

  <!-- FILTROS -->
  <form [formGroup]="filtroForm" class="filtro-form">
    <mat-form-field appearance="outline">
      <mat-label>Fecha inicio</mat-label>
      <input matInput [matDatepicker]="pickerStart" formControlName="startDate">
      <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
      <mat-datepicker #pickerStart></mat-datepicker>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Fecha fin</mat-label>
      <input matInput [matDatepicker]="pickerEnd" formControlName="endDate">
      <mat-datepicker-toggle matSuffix [for]="pickerEnd"></mat-datepicker-toggle>
      <mat-datepicker #pickerEnd></mat-datepicker>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>ID Odontólogo</mat-label>
      <input matInput type="number" formControlName="idOdontologo">
    </mat-form-field>
    <button mat-raised-button color="primary" (click)="cargarTurnos()" type="button">
      <i class="fas fa-filter"></i> Filtrar
    </button>
    <button mat-raised-button color="warn" (click)="limpiarFiltros()" type="button">
      <i class="fas fa-undo"></i> Limpiar
    </button>
  </form>

  <!-- SPINNER -->
  <div class="loading-container" *ngIf="loading">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Cargando turnos...</p>
  </div>

  <!-- NO DATA -->
  <div class="no-data" *ngIf="!loading && turnos.length === 0">
    <i class="fas fa-calendar-times"></i>
    <p>No hay turnos para el período seleccionado.</p>
  </div>

  <!-- CARDS GRID -->
  <div class="turnos-grid" *ngIf="!loading && turnos.length > 0">
    <div class="turno-card animate-in" *ngFor="let turno of turnos; let i = index" style="--delay: {{ (i * 0.1) + 's' }};">
      <div class="turno-header">
        <div class="turno-date">
          <strong>{{ turno.fecha | date:'dd MMM' }}</strong>
          <span class="turno-time">{{ turno.hora }}</span>
        </div>
        <span class="status-badge" [ngClass]="getEstadoClase(turno.estado)">
          {{ turno.estado | titlecase }}
        </span>
      </div>

      <div class="turno-body">
        <p class="paciente">
          <i class="fas fa-user"></i>
          <strong>Paciente:</strong> {{ turno.paciente.nombre }} {{ turno.paciente.apellido }}
        </p>
        <p class="odontologo">
          <i class="fas fa-user-md"></i>
          <strong>Odontólogo:</strong> {{ turno.odontologo.nombre }} {{ turno.odontologo.apellido }}
        </p>
      </div>

      <div class="turno-footer">
        <small class="text-muted">
          ID Turno: #{{ turno.id }}
        </small>
      </div>
    </div>
  </div>
</div>