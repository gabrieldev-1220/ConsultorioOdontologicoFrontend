<div class="dashboard-container">
  <h2>Bienvenido, {{ username }}</h2>
  <div class="stats-cards" *ngIf="!stats.loading; else loadingTpl">
    <div class="card">
      <h3>Pacientes totales</h3>
      <p>{{ stats.pacientesTotal }}</p>
    </div>
    <div class="card">
      <h3>Turnos hoy</h3>
      <p>{{ stats.turnosHoy }}</p>
    </div>
    <div class="card">
      <h3>Historiales hoy</h3>
      <p>{{ stats.historialesHoy }}</p>
    </div>
  </div>
  <ng-template #loadingTpl>
    <p>Cargando datos...</p>
  </ng-template>

  <!-- TURNOS DEL DÍA -->
  <div class="turnos-hoy" *ngIf="!stats.loading && turnosHoy.length > 0">
    <h3>Turnos del día</h3>
    <div class="turnos-cards">
      <div class="turno-card" *ngFor="let turno of turnosHoy; let i = index" style="--delay: {{ (i * 0.1) + 's' }};">
        <div class="turno-header">
          <span class="paciente">{{ turno.paciente.nombre }} {{ turno.paciente.apellido }}</span>
          <span class="odontologo">{{ getOdontologoName(turno.odontologo) }}</span>
        </div>
        <div class="turno-body">
          <div class="fecha-hora">
            <span class="fecha">{{ turno.fecha | date:'d MMM yyyy' }}</span>
            <span class="hora">{{ turno.hora }}</span>
          </div>
          <div class="estado" [ngClass]="{
            'estado-pendiente': turno.estado === 'pendiente',
            'estado-confirmado': turno.estado === 'confirmado',
            'estado-realizado': turno.estado === 'realizado',
            'estado-cancelado': turno.estado === 'cancelado'
          }">
            {{ turno.estado | titlecase }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <p *ngIf="!stats.loading && turnosHoy.length === 0" class="sin-turnos">
    No hay turnos para el día de hoy.
  </p>
</div>